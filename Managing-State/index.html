<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
</head>
<body>
    <h1 id="className"></h1>
    <h3 id="teacher"></h3>
    <h4 id="students"></h4>
    <button id="classCreate">Create Classroom</button>
    <button id="classJoin">Join Classroom</button>
    <button id="classLeave">Leave Classroom</button>


    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery-3.1.1.min.js"></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/jquery.signalR-2.2.1.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="signalr/hubs"></script>
    <!--Add script to update the page and send messages.-->
    <script type="text/javascript">
        var connection = $.hubConnection();
        var schoolHub = connection.createHubProxy('schoolHub');

        // SignalR client methods
        schoolHub.on('classRoomDetails', function (students, teacher = $('#teacher').text(), subject = $('#className').text()) {
            $('#className').text(subject);
            $('#teacher').text(teacher);
            $('#students').text(students);
        });

        schoolHub.on('roomDoesntExist', function () {
            alert('Classroom does not exist!');
        });

        schoolHub.on('leftRoom', function () {
            $('#className').text('');
            $('#teacher').text('');
            $('#students').text('');
        });


        // Set client name
        connection.qs = { 'name': prompt('What is your name?')};
        
        // Start connection, when finished assign click handlers to buttons
        connection.start().done(function () {
            $('#classCreate').click(function () {
                schoolHub.invoke('CreateClassRoom', prompt('Class Name: '))
            });
            $('#classJoin').click(function () {
                schoolHub.invoke('JoinClassRoom', prompt('Class Name: '))
            });
            $('#classLeave').click(function () {
                schoolHub.invoke('LeaveClassRoom')
            });
        });
    </script>
</body>
</html>

